{"version":3,"file":"index.js","sources":["../h-symbol.vue","../index.ts"],"sourcesContent":["<template>\r\n    <svg :viewBox=\"viewBox\" v-bind=\"attrs\">\r\n        <path :d=\"path\" class=\"fill-current\" />\r\n    </svg>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport type { Ref } from 'vue';\r\nimport { computed, ref, watch } from 'vue';\r\nimport type { OpticalSize, Filled, IconKey, Theme, Weight } from '@hyrioo/vite-plugin-material-symbols-svg/consumer';\r\nimport { getSymbol } from '@hyrioo/vite-plugin-material-symbols-svg/consumer';\r\nimport { symbolDefaultProps } from './index';\r\n\r\nexport interface HSymbolProps {\r\n    icon: IconKey;\r\n    weight?: Weight;\r\n    theme?: Theme;\r\n    filled?: Filled;\r\n    size?: number; // rendered size; used to decide the optical size bucket\r\n    opticalSize?: OpticalSize | null;\r\n}\r\n\r\nconst props = withDefaults(defineProps<HSymbolProps>(), {\r\n    weight: () => symbolDefaultProps.weight,\r\n    theme: () => symbolDefaultProps.theme,\r\n    filled: () => symbolDefaultProps.filled,\r\n    size: 24,\r\n    opticalSize: null,\r\n});\r\n\r\nconst path: Ref<string> = ref('');\r\nconst viewBox: Ref<string> = ref('0 0 24 24');\r\n\r\nconst attrs = computed(() => ({\r\n    width: props.size,\r\n    height: props.size,\r\n}));\r\n\r\nfunction updateIcon() {\r\n    const available = getSymbol({\r\n        icon: String(props.icon),\r\n        theme: props.theme,\r\n        filled: props.filled ? 1 : 0,\r\n        weight: Number(props.weight),\r\n    });\r\n\r\n    if (available) {\r\n        const targetSize = props.opticalSize || props.size;\r\n        const sizes = Object.keys(available).map(Number).sort((a, b) => a - b);\r\n\r\n        let bestSize = targetSize;\r\n        if (!(available as any)[targetSize] && sizes.length > 0) {\r\n            bestSize = sizes.reduce((prev, curr) => {\r\n                return Math.abs(curr - targetSize) < Math.abs(prev - targetSize) ? curr : prev;\r\n            });\r\n        }\r\n\r\n        const svg = (available as any)[bestSize];\r\n        if (svg) {\r\n            path.value = svg.d;\r\n            viewBox.value = svg.viewBox;\r\n            return;\r\n        }\r\n    }\r\n\r\n    path.value = '';\r\n\r\n    if (symbolDefaultProps.debug) {\r\n        // eslint-disable-next-line no-console\r\n        console.warn(`[h-symbol] Icon not found: ${String(props.icon)} (size ${props.size})`);\r\n    }\r\n}\r\n\r\nwatch(\r\n    () => [props.icon, props.theme, props.filled, props.weight, props.size],\r\n    () => updateIcon(),\r\n);\r\n\r\nupdateIcon();\r\n</script>\r\n","import { readonly } from 'vue';\r\nimport type { Filled, Theme, Weight } from '@hyrioo/vite-plugin-material-symbols-svg/consumer';\r\nimport { isProduction } from '@hyrioo/vite-plugin-material-symbols-svg';\r\n\r\nexport { default as HSymbol } from './h-symbol.vue';\r\nexport type { HSymbolProps } from './h-symbol.vue';\r\n\r\nexport interface HSymbolDefaultProps {\r\n    weight: Weight;\r\n    theme: Theme;\r\n    filled: Filled;\r\n    debug: boolean;\r\n}\r\n\r\nlet _defaults: HSymbolDefaultProps = {\r\n    weight: 400,\r\n    theme: 'rounded',\r\n    filled: false,\r\n    debug: isProduction,\r\n};\r\nconsole.log('h-symbol debug:', _defaults.debug);\r\n\r\nexport function configureSymbolDefaultProps(\r\n    overrides: Partial<HSymbolDefaultProps>,\r\n) {\r\n    _defaults = {\r\n        ..._defaults,\r\n        ...overrides,\r\n    };\r\n}\r\n\r\nexport const symbolDefaultProps = readonly({\r\n    get weight() {\r\n        return _defaults.weight;\r\n    },\r\n    get theme() {\r\n        return _defaults.theme;\r\n    },\r\n    get filled() {\r\n        return _defaults.filled;\r\n    },\r\n    get debug() {\r\n        return _defaults.debug;\r\n    },\r\n});"],"names":["props","__props","path","ref","viewBox","attrs","computed","updateIcon","available","getSymbol","targetSize","sizes","a","b","bestSize","prev","curr","svg","symbolDefaultProps","watch","_openBlock","_createElementBlock","_mergeProps","_createElementVNode","_defaults","isProduction","configureSymbolDefaultProps","overrides","readonly"],"mappings":";;;;;;;;;;;;;;AAsBA,UAAMA,IAAQC,GAQRC,IAAoBC,EAAI,EAAE,GAC1BC,IAAuBD,EAAI,WAAW,GAEtCE,IAAQC,EAAS,OAAO;AAAA,MAC1B,OAAON,EAAM;AAAA,MACb,QAAQA,EAAM;AAAA,IAAA,EAChB;AAEF,aAASO,IAAa;AAClB,YAAMC,IAAYC,EAAU;AAAA,QACxB,MAAM,OAAOT,EAAM,IAAI;AAAA,QACvB,OAAOA,EAAM;AAAA,QACb,QAAQA,EAAM,SAAS,IAAI;AAAA,QAC3B,QAAQ,OAAOA,EAAM,MAAM;AAAA,MAAA,CAC9B;AAED,UAAIQ,GAAW;AACX,cAAME,IAAaV,EAAM,eAAeA,EAAM,MACxCW,IAAQ,OAAO,KAAKH,CAAS,EAAE,IAAI,MAAM,EAAE,KAAK,CAACI,GAAGC,MAAMD,IAAIC,CAAC;AAErE,YAAIC,IAAWJ;AACf,QAAI,CAAEF,EAAkBE,CAAU,KAAKC,EAAM,SAAS,MAClDG,IAAWH,EAAM,OAAO,CAACI,GAAMC,MACpB,KAAK,IAAIA,IAAON,CAAU,IAAI,KAAK,IAAIK,IAAOL,CAAU,IAAIM,IAAOD,CAC7E;AAGL,cAAME,IAAOT,EAAkBM,CAAQ;AACvC,YAAIG,GAAK;AACL,UAAAf,EAAK,QAAQe,EAAI,GACjBb,EAAQ,QAAQa,EAAI;AACpB;AAAA,QACJ;AAAA,MACJ;AAEA,MAAAf,EAAK,QAAQ,IAETgB,EAAmB,SAEnB,QAAQ,KAAK,8BAA8B,OAAOlB,EAAM,IAAI,CAAC,UAAUA,EAAM,IAAI,GAAG;AAAA,IAE5F;AAEA,WAAAmB;AAAA,MACI,MAAM,CAACnB,EAAM,MAAMA,EAAM,OAAOA,EAAM,QAAQA,EAAM,QAAQA,EAAM,IAAI;AAAA,MACtE,MAAMO,EAAA;AAAA,IAAW,GAGrBA,EAAA,cA7EIa,EAAA,GAAAC,EAEM,OAFNC,EAEM,EAFA,SAASlB,EAAA,MAAA,GAAiBC,EAAA,KAAK,GAAA;AAAA,MACjCkB,EAAuC,QAAA;AAAA,QAAhC,GAAGrB,EAAA;AAAA,QAAM,OAAM;AAAA,MAAA;;;;ACY9B,IAAIsB,IAAiC;AAAA,EACjC,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,QAAQ;AAAA,EACR,OAAOC;AACX;AACA,QAAQ,IAAI,mBAAmBD,EAAU,KAAK;AAEvC,SAASE,EACZC,GACF;AACE,EAAAH,IAAY;AAAA,IACR,GAAGA;AAAA,IACH,GAAGG;AAAA,EAAA;AAEX;AAEO,MAAMT,IAAqBU,EAAS;AAAA,EACvC,IAAI,SAAS;AACT,WAAOJ,EAAU;AAAA,EACrB;AAAA,EACA,IAAI,QAAQ;AACR,WAAOA,EAAU;AAAA,EACrB;AAAA,EACA,IAAI,SAAS;AACT,WAAOA,EAAU;AAAA,EACrB;AAAA,EACA,IAAI,QAAQ;AACR,WAAOA,EAAU;AAAA,EACrB;AACJ,CAAC;"}