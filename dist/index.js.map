{"version":3,"file":"index.js","sources":["../../vite-plugin-material-symbols-svg/dist/loader-map.js","../../vite-plugin-material-symbols-svg/dist/consumer.js","../c-icon.vue"],"sourcesContent":["const RAW_MAP = {};\nexport {\n  RAW_MAP as default\n};\n//# sourceMappingURL=loader-map.js.map\n","import RAW_MAP from \"./loader-map.js\";\nconst REGISTRY = /* @__PURE__ */ new Map();\nconst DEFAULT_THEME = \"rounded\";\nconst DEFAULT_FILL = 0;\nconst DEFAULT_WEIGHT = 200;\nfunction keyOf(k) {\n  return `${k.theme}::${k.icon}::${k.fill}::${k.weight}::${k.size}`;\n}\nfunction parseSvg(svg) {\n  const viewBoxMatch = svg.match(/viewBox=\"([^\"]+)\"/i);\n  const pathMatch = svg.match(/<path[^>]*\\sd=\"([^\"]+)\"[^>]*>/i);\n  if (!viewBoxMatch || !pathMatch) return null;\n  return { viewBox: viewBoxMatch[1], d: pathMatch[1] };\n}\nfunction getSymbol(k) {\n  const key = keyOf(k);\n  let symbol = REGISTRY.get(key);\n  if (symbol) return symbol;\n  const raw = RAW_MAP[key];\n  if (raw) {\n    symbol = parseSvg(raw) || void 0;\n    if (symbol) {\n      REGISTRY.set(key, symbol);\n      {\n        console.log(`[material-symbols-svg] getSymbol: parsed and cached \"${key}\"`);\n      }\n      return symbol;\n    }\n  }\n  {\n    console.warn(`[material-symbols-svg] getSymbol: NOT found \"${key}\"`);\n  }\n  return void 0;\n}\nfunction defineIcons(symbols, custom, defaults) {\n  {\n    const symbolCount = Object.keys(symbols || {}).length;\n    const customCount = Object.keys(custom || {}).length;\n    console.log(`[material-symbols-svg] defineIcons: symbols=${symbolCount}, custom=${customCount}`);\n  }\n  if (custom && (typeof window !== \"undefined\" || globalThis.VITE_CLIENT)) {\n    for (const [icon, sizes] of Object.entries(custom)) {\n      for (const [sizeStr, value] of Object.entries(sizes || {})) {\n        const size = Number(sizeStr);\n        const key = {\n          icon,\n          theme: DEFAULT_THEME,\n          fill: DEFAULT_FILL,\n          weight: DEFAULT_WEIGHT,\n          size\n        };\n        const handleSvg = (raw) => {\n          const svgString = typeof raw === \"string\" ? raw : raw == null ? void 0 : raw.default;\n          if (svgString) {\n            const parsed = parseSvg(svgString);\n            if (parsed) {\n              REGISTRY.set(keyOf(key), parsed);\n              {\n                console.log(`[material-symbols-svg] Custom icon registered: ${keyOf(key)}`);\n              }\n            }\n          }\n        };\n        if (value instanceof Promise) {\n          value.then(handleSvg).catch((err) => {\n            {\n              console.error(`[material-symbols-svg] Failed to load custom icon: ${icon} (${size})`, err);\n            }\n          });\n        } else if (value && typeof value === \"object\" && \"default\" in value) {\n          handleSvg(value);\n        } else if (typeof value === \"string\" && value.includes(\"<svg\")) {\n          handleSvg(value);\n        }\n      }\n    }\n  }\n  return {\n    Symbols: symbols,\n    Custom: custom ?? {},\n    Default: defaults ?? void 0\n  };\n}\nexport {\n  defineIcons,\n  getSymbol\n};\n//# sourceMappingURL=consumer.js.map\n","<template>\r\n  <svg :viewBox=\"viewBox\" v-bind=\"attrs\">\r\n    <path class=\"fill-current\" :d=\"path\" />\r\n  </svg>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, ref, watch } from 'vue';\r\nimport type { Ref } from 'vue';\r\nimport { getSymbol } from '@hyrioo/vite-plugin-material-symbols-svg/consumer';\r\nimport type { IconKey } from '@hyrioo/vite-plugin-material-symbols-svg/consumer';\r\n\r\ntype Theme = 'rounded' | 'outlined' | 'sharp';\r\n\r\nexport interface CIconProps {\r\n  icon: IconKey;\r\n  weight?: number;\r\n  theme?: Theme;\r\n  fill?: 0 | 1;\r\n  width?: number;\r\n  height?: number;\r\n  size?: number; // rendered size; used to decide optical size bucket\r\n}\r\n\r\nconst props = withDefaults(defineProps<CIconProps>(), {\r\n  width: undefined,\r\n  height: undefined,\r\n  size: 24,\r\n  theme: 'rounded',\r\n  fill: 0,\r\n  weight: 200,\r\n});\r\n\r\nconst path: Ref<string> = ref('');\r\nconst viewBox: Ref<string> = ref('0 0 24 24');\r\n\r\nconst attrs = computed(() => ({\r\n  width: props.width ?? props.size,\r\n  height: props.height ?? props.size,\r\n}));\r\n\r\nfunction opticalSizeFor(rendered: number): 20 | 24 | 40 | 48 {\r\n  return rendered < 22 ? 20 : rendered < 32 ? 24 : rendered < 44 ? 40 : 48;\r\n}\r\n\r\nfunction updateIcon() {\r\n  const rendered = props.size ?? 24;\r\n  const size = opticalSizeFor(rendered);\r\n  const svg = getSymbol({\r\n    icon: String(props.icon),\r\n    theme: props.theme ?? 'rounded',\r\n    fill: (props.fill ?? 0) as 0 | 1,\r\n    weight: Number(props.weight ?? 200),\r\n    size: Number(size),\r\n  });\r\n  if (svg) {\r\n    path.value = svg.d;\r\n    viewBox.value = svg.viewBox;\r\n  } else {\r\n    const IS_DEV = (typeof process !== 'undefined' && process.env.NODE_ENV !== 'production') || \r\n                   (typeof (import.meta as any).env !== 'undefined' && (import.meta as any).env.DEV);\r\n    if (IS_DEV) {\r\n      // eslint-disable-next-line no-console\r\n      console.warn(`[CIcon] Icon not found: ${String(props.icon)} (size ${size})`);\r\n    }\r\n  }\r\n}\r\n\r\nwatch(\r\n  () => [props.icon, props.theme, props.fill, props.weight, props.size],\r\n  () => updateIcon(),\r\n);\r\n\r\nupdateIcon();\r\n</script>\r\n"],"names":["RAW_MAP","REGISTRY","keyOf","k","parseSvg","svg","viewBoxMatch","pathMatch","getSymbol","key","symbol","raw","props","__props","path","ref","viewBox","attrs","computed","opticalSizeFor","rendered","updateIcon","size","__vite_import_meta_env__","watch","_openBlock","_createElementBlock","_mergeProps","_createElementVNode"],"mappings":";AAAA,MAAMA,IAAU,CAAA,GCCVC,IAA2B,oBAAI,IAAG;AAIxC,SAASC,EAAMC,GAAG;AAChB,SAAO,GAAGA,EAAE,KAAK,KAAKA,EAAE,IAAI,KAAKA,EAAE,IAAI,KAAKA,EAAE,MAAM,KAAKA,EAAE,IAAI;AACjE;AACA,SAASC,EAASC,GAAK;AACrB,QAAMC,IAAeD,EAAI,MAAM,oBAAoB,GAC7CE,IAAYF,EAAI,MAAM,gCAAgC;AAC5D,SAAI,CAACC,KAAgB,CAACC,IAAkB,OACjC,EAAE,SAASD,EAAa,CAAC,GAAG,GAAGC,EAAU,CAAC,EAAC;AACpD;AACA,SAASC,EAAUL,GAAG;AACpB,QAAMM,IAAMP,EAAMC,CAAC;AACnB,MAAIO,IAAST,EAAS,IAAIQ,CAAG;AAC7B,MAAIC,EAAQ,QAAOA;AACnB,QAAMC,IAAMX,EAAQS,CAAG;AACvB,MAAIE,MACFD,IAASN,EAASO,CAAG,KAAK,QACtBD;AACF,WAAAT,EAAS,IAAIQ,GAAKC,CAAM,GAEtB,QAAQ,IAAI,wDAAwDD,CAAG,GAAG,GAErEC;AAIT,UAAQ,KAAK,gDAAgDD,CAAG,GAAG;AAGvE;;;;;;;;;;;;;ACTA,UAAMG,IAAQC,GASRC,IAAoBC,EAAI,EAAE,GAC1BC,IAAuBD,EAAI,WAAW,GAEtCE,IAAQC,EAAS,OAAO;AAAA,MAC5B,OAAON,EAAM,SAASA,EAAM;AAAA,MAC5B,QAAQA,EAAM,UAAUA,EAAM;AAAA,IAAA,EAC9B;AAEF,aAASO,EAAeC,GAAqC;AAC3D,aAAOA,IAAW,KAAK,KAAKA,IAAW,KAAK,KAAKA,IAAW,KAAK,KAAK;AAAA,IACxE;AAEA,aAASC,IAAa;AACpB,YAAMD,IAAWR,EAAM,QAAQ,IACzBU,IAAOH,EAAeC,CAAQ,GAC9Bf,IAAMG,EAAU;AAAA,QACpB,MAAM,OAAOI,EAAM,IAAI;AAAA,QACvB,OAAOA,EAAM,SAAS;AAAA,QACtB,MAAOA,EAAM,QAAQ;AAAA,QACrB,QAAQ,OAAOA,EAAM,UAAU,GAAG;AAAA,QAClC,MAAM,OAAOU,CAAI;AAAA,MAAA,CAClB;AACD,MAAIjB,KACFS,EAAK,QAAQT,EAAI,GACjBW,EAAQ,QAAQX,EAAI,YAEJ,OAAO,UAAY,OAAe,QAAQ,IAAI,aAAa,gBAC3D,OAAQkB,IAA4B,OAAgB,OAGlE,QAAQ,KAAK,2BAA2B,OAAOX,EAAM,IAAI,CAAC,UAAUU,CAAI,GAAG;AAAA,IAGjF;AAEA,WAAAE;AAAA,MACE,MAAM,CAACZ,EAAM,MAAMA,EAAM,OAAOA,EAAM,MAAMA,EAAM,QAAQA,EAAM,IAAI;AAAA,MACpE,MAAMS,EAAA;AAAA,IAAW,GAGnBA,EAAA,cAxEEI,EAAA,GAAAC,EAEM,OAFNC,EAEM,EAFA,SAASX,EAAA,MAAA,GAAiBC,EAAA,KAAK,GAAA;AAAA,MACnCW,EAAuC,QAAA;AAAA,QAAjC,OAAM;AAAA,QAAgB,GAAGd,EAAA;AAAA,MAAA;;;;"}